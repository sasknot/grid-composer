!function(i){"use strict";i.fn.gridComposer=function(e){var n=i.extend({},i.fn.gridComposer.defaults,e);return n.columns&&n.lines?(n.width=n.columns*n.dimension,n.height=n.lines*n.dimension):n.width&&n.height?(n.columns=n.width/n.dimension,n.lines=n.height/n.dimension):i.error("Grid Composer: columns and lines or width and height must be defined to calculate the grid"),this.each(function(){var e=i(this),d=e.find(".gc-components"),s=i("<div></div>").addClass("gc-grid");if(e.addClass("gc-container"),s.width(n.width).height(n.height),n.showGrid){for(var o=i("<div></div>").addClass("gc-grid-helper"),t=0;t<n.columns*n.lines;t++)i("<div></div>").width(n.dimension).height(n.dimension).appendTo(o);o.appendTo(s)}d.children().draggable({helper:"clone"}),s.droppable({accept:".gc-component-item",drop:function(e,d){var s=i(d.draggable).clone(),o=d.position.left,t=d.position.top-d.helper.parent().height();s.removeClass("gc-component-item ui-draggable").addClass("gc-grid-item"),o%n.dimension>0&&(o=Math.round(o/n.dimension)*n.dimension),t%n.dimension>0&&(t=Math.round(t/n.dimension)*n.dimension),s.css({position:"absolute",left:o,top:t}),i(this).append(s),i(this).children("*:not(.gc-grid-helper)").draggable({containment:"parent",cursor:"move",grid:[n.dimension,n.dimension]}),i(this).children(".gc-resize").resizable({containment:"parent",handles:"e, s, se",grid:n.dimension}),i(this).children(".gc-resize-horz").resizable({containment:"parent",handles:"e",grid:n.dimension}),i(this).children(".gc-resize-vert").resizable({containment:"parent",handles:"s",grid:n.dimension})}}),s.appendTo(e)})},i.fn.gridComposer.defaults={showGrid:!0}}(jQuery);